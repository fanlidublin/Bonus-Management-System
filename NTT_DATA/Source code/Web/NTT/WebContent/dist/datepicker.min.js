!function(e){function t(a){function n(){var e=d();s(e.year,e.month),F.find(b).hide(),F.show()}function l(){F.hide()}function s(e,t){var a=[],n=new Date(e,t-1,1),l=n.getDay(),s=0;if(l!=h.weekStart){n.setDate(0);var o=n.getDate(),s=l-h.weekStart;0>s&&(s+=7);for(var c=s-1;c>=0;c--)a.push({value:r(n.getFullYear(),n.getMonth()+1,o-c),date:o-c,"class":"prev-month"})}n.setFullYear(e,t,0);for(var c=1,u=n.getDate();u>=c;c++)a.push({value:r(n.getFullYear(),n.getMonth()+1,c),date:c,"class":"curr-month"});var p=d();if(p.year==e&&p.month==t&&(a[s+p.day-1]["class"]+=" selected"),a.length%7>0){n.setFullYear(e,t,1);for(var c=1,u=7-a.length%7;u>=c;c++)a.push({value:r(n.getFullYear(),n.getMonth()+1,c),date:c,"class":"next-month"})}R.data("year",e).text(e+m.yearText),Y.data("month",t).text(t+m.monthText),M.html(i(a))}function i(e){var t=[];t.push("<tr>");for(var a=0,n=e.length;n>a;a++)t.push('<td class="cell '+e[a]["class"]+'" data-value="'+e[a].value+'">'+e[a].date+"</td>"),(a+1)%7==0&&a!=n-1&&t.push("</tr></tr>");return t.push("</tr>"),t.join("")}function r(e,t,a){return h.format.replace(/[ymd]+/gi,function(n){return n=n.toLowerCase(),"yyyy"==n?e:"mm"==n?10>t?"0"+t:t:10>a?"0"+a:a})}function d(){var e={},t=o.val(),a=0,n=0,l=0,s=h.format.replace(/[ymd]+|[^ymd]/gi,function(e,t){return e=e.toLowerCase(),"yyyy"==e?(a=t,"\\d{4}"):"mm"==e?(n=t,"\\d{2}"):"dd"==e?(l=t,"\\d{2}"):"\\"+e}),i=new RegExp(s);if(i.test(t))e={year:t.substr(a,4)-0,month:t.substr(n,2)-0,day:t.substr(l,2)-0};else{var r=new Date;e={year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()}}return e}var o=e(this),c=o.offset(),h={trigger:"",weekStart:1,yearRange:[-6,6],format:"yyyy-mm-dd",language:"zh_CN"};e.extend(h,a);var u="datepicker",m=t.language[h.language],p="focus."+u,f="click."+u,g="mousedown."+u,v='<div class="{{namespace}}" style="top:{{positionTop}};left:{{positionLeft}}" >                    <div class="top">                        <div class="{{namespace}}-select {{namespace}}-select-year">                            <div class="{{namespace}}-select-selected"></div>                            <ul class="{{namespace}}-select-options">                            {{yearRange}}                            </ul>                        </div>                        <div class="{{namespace}}-select {{namespace}}-select-month">                            <div class="{{namespace}}-select-selected"></div>                                <ul class="{{namespace}}-select-options">                                    <li data-month="1">&ensp;1</li>                                    <li data-month="7">&ensp;7</li>                                    <li data-month="2">&ensp;2</li>                                    <li data-month="8">&ensp;8</li>                                    <li data-month="3">&ensp;3</li>                                    <li data-month="9">&ensp;9</li>                                    <li data-month="4">&ensp;4</li>                                    <li data-month="10">10</li>                                    <li data-month="5">&ensp;5</li>                                    <li data-month="11">11</li>                                    <li data-month="6">&ensp;6</li>                                    <li data-month="12">12</li>                                </ul>                            </div>                        </div>                    <table class="body">                        <thead>                            <tr>                                {{weekHead}}                            </tr>                        </thead>                        <tbody>                        </tbody>                    </table>                    <div class="bottom">                        <div class="btn-clear">{{clearText}}</div>                    </div>            </div>',y=e.extend({},{yearRange:function(){for(var e=new Date,t=e.getFullYear()+h.yearRange[0],a=h.yearRange[1]-h.yearRange[0],n=Math.ceil(a/2),l=[],s=0;n>s;s++)l.push('<li data-year="'+(t+s)+'">'+(t+s)+"</li>"),l.push('<li data-year="'+(t+s+n)+'">'+(t+s+n)+"</li>");return a%2!=0&&l.pop(),l.join("")}(),weekHead:function(){for(var e=[],t=h.weekStart;t<h.weekStart+7;t++)e.push('<td class="cell week-cell">'+m.week[t%7]+"</td>");return e.join("")}(),clearText:m.clearText,positionTop:c.top+o.outerHeight()+"px",positionLeft:c.left+"px",namespace:u});v=v.replace(/\{\{(\w+)\}\}/g,function(e,t){return y[t]});var w="."+u,x=w+"-select",b=x+"-options",k=x+"-options li",T=x+"-selected",C=x+"-year",D=x+"-month",F=e(v).appendTo(document.body),R=F.find(C+" "+T),Y=F.find(D+" "+T),M=F.find(".body tbody");return F.on(f,x,function(){var t=e(this).find(b);e(this).siblings(x).find(b).fadeOut(200);var a=e(this).find(T).data();t.is(":hidden")?(t.find(".selected").removeClass("selected"),a.year?t.find("[data-year="+a.year+"]").addClass("selected"):t.find("[data-month="+a.month+"]").addClass("selected"),t.fadeIn(100)):t.fadeOut(200)}).on(f,k,function(){var t=e(this).data("year")||R.data("year"),a=e(this).data("month")||Y.data("month");s(t,a)}).on(f,".curr-month,.prev-month,.next-month",function(){M.find(".selected").removeClass("selected"),e(this).addClass("selected");var t=e(this).data("value");o.val(t),F.hide()}).on(f,".btn-clear",function(){o.val(""),F.hide()}),e(h.trigger).length>0?e(h.trigger).on(f,function(){F.is(":hidden")?n():l()}):o.on(p,n),e(document).on(g,function(t){var a=e(t.target);0!=a.closest(h.trigger).length||0!=a.closest(".datepicker").length||a.is(o)||F.hide()}),F}t.language={zh_CN:{yearText:"年",monthText:"月",clearText:"清除",week:["日","一","二","三","四","五","六"]}},e.fn.datepicker=t,e.fn.datepicker.language=t.language}(jQuery);